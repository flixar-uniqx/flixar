<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <title>FLIX·êÉR | Bring the Theatre to Your Home</title>
    <meta name="description" content="Stream and download high-quality movies and TV series.">
    
    <meta property="og:site_name" content="StreamHub">
    <meta property="og:title" content="StreamHub - Watch Movies & Series">
    <meta property="og:image" content="https://cdn-icons-png.flaticon.com/512/2503/2503508.png"> <meta property="og:type" content="website">

    <link rel="stylesheet" href="style.css">
</head>
<body>

    <div class="container">
        <div id="featured-content"></div>

        <div class="section-header">
            Latest Releases
        </div>

        <div class="grid" id="movie-grid">
            </div>
    </div>

    <script src="config.js"></script>
    <script src="app.js"></script>
    
    <script>
        // Wait for global scripts to load
        document.addEventListener('DOMContentLoaded', () => {
            fetch('movies.json?t=' + Date.now())
                .then(r => r.json())
                .then(data => {
                    const grid = document.getElementById('movie-grid');
                    if(!grid) return;
                    
                    grid.innerHTML = ''; // Clear loading state
                    
                    // Show latest first
                    data.reverse().forEach(m => {
                        // Determine folder path
                        const folder = m.type === 'TV Series' ? 'series' : 'movie';
                        
                        grid.innerHTML += `
                            <div class="card reveal" onclick="window.location.href='${folder}/index.html?id=${m.id}'">
                                <img src="${m.poster}" class="poster" loading="lazy" alt="${m.title}">
                                <div class="card-info">
                                    <div class="card-title">${m.title}</div>
                                    <div class="card-meta">
                                        <span>${m.year}</span>
                                        <span class="badge">${m.type}</span>
                                    </div>
                                </div>
                            </div>
                        `;
                    });

                    // Trigger Animations
                    const observer = new IntersectionObserver((entries) => {
                        entries.forEach(entry => {
                            if(entry.isIntersecting) entry.target.classList.add('active');
                        });
                    });
                    document.querySelectorAll('.reveal').forEach(el => observer.observe(el));
                })
                .catch(err => {
                    console.error(err);
                    document.getElementById('movie-grid').innerHTML = '<h3 style="text-align:center; width:100%;">Error loading content. Check Console.</h3>';
                });
        });
    </script>
</body>
</html>

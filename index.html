<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Movies Hub</title>
    <style>
        :root { --bg: #141414; --card: #1f1f1f; --primary: #e50914; --text: #fff; --sub: #b3b3b3; }
        body { margin: 0; font-family: 'Segoe UI', sans-serif; background: var(--bg); color: var(--text); }
        
        /* Navbar */
        .nav { padding: 20px 4%; display: flex; align-items: center; background: linear-gradient(to bottom, rgba(0,0,0,0.7), transparent); position: fixed; width: 100%; top: 0; z-index: 50; }
        .logo { font-size: 1.5rem; font-weight: bold; color: var(--primary); text-transform: uppercase; letter-spacing: 2px; }

        /* Hero */
        .hero { height: 70vh; background-size: cover; background-position: center; position: relative; display: flex; align-items: flex-end; }
        .hero::after { content: ''; position: absolute; inset: 0; background: linear-gradient(to top, var(--bg) 10%, transparent 90%); }
        .hero-content { position: relative; z-index: 2; padding: 0 4% 100px; max-width: 600px; }
        .hero-title { font-size: 3rem; margin: 0 0 10px; text-shadow: 2px 2px 4px black; }
        .hero-desc { color: #ddd; margin-bottom: 20px; font-size: 1.1rem; line-height: 1.5; text-shadow: 1px 1px 2px black; display: -webkit-box; -webkit-line-clamp: 3; -webkit-box-orient: vertical; overflow: hidden; }
        .btn { padding: 10px 25px; border-radius: 4px; border: none; font-weight: bold; cursor: pointer; transition: 0.2s; text-decoration: none; display: inline-block; }
        .btn-play { background: var(--text); color: black; }
        .btn-play:hover { background: #ccc; }

        /* Grid */
        .section-title { padding: 0 4%; margin-top: -50px; position: relative; z-index: 10; font-size: 1.2rem; font-weight: 500; color: #e5e5e5; }
        .grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(160px, 1fr)); gap: 10px; padding: 20px 4%; }
        .card { position: relative; aspect-ratio: 2/3; border-radius: 4px; overflow: hidden; cursor: pointer; transition: transform 0.3s ease; }
        .card img { width: 100%; height: 100%; object-fit: cover; }
        .card:hover { transform: scale(1.05); z-index: 20; box-shadow: 0 10px 20px rgba(0,0,0,0.5); }
        .card-overlay { position: absolute; bottom: 0; left: 0; right: 0; background: linear-gradient(to top, black, transparent); padding: 10px; opacity: 0; transition: opacity 0.3s; }
        .card:hover .card-overlay { opacity: 1; }
        .card-title { font-size: 0.9rem; font-weight: bold; }
        .card-meta { font-size: 0.75rem; color: #46d369; margin-top: 5px; }

        @media(max-width: 768px) { .hero-title { font-size: 2rem; } .grid { grid-template-columns: repeat(3, 1fr); } }
    </style>
</head>
<body>

    <nav class="nav">
        <div class="logo">MOVIES HUB</div>
    </nav>

    <div id="hero" class="hero">
        <div class="hero-content">
            <h1 id="hero-title" class="hero-title">Loading...</h1>
            <p id="hero-desc" class="hero-desc"></p>
            <a id="hero-btn" href="#" class="btn btn-play">▶ Play</a>
        </div>
    </div>

    <h2 class="section-title">Latest Added</h2>
    <div id="grid" class="grid"></div>

    <script>
        // Force refresh to avoid caching issues
        const DB_URL = 'movies.json?t=' + new Date().getTime();

        fetch(DB_URL)
            .then(res => res.json())
            .then(data => {
                // 1. Setup Hero (First movie in list)
                if(data.length > 0) {
                    const feat = data[0];
                    const hero = document.getElementById('hero');
                    hero.style.backgroundImage = `url('${feat.backdrop || feat.poster}')`;
                    document.getElementById('hero-title').innerText = feat.title;
                    document.getElementById('hero-desc').innerText = feat.description;
                    document.getElementById('hero-btn').href = `watch.html?id=${feat.id}`;
                }

                // 2. Setup Grid
                const grid = document.getElementById('grid');
                data.forEach(movie => {
                    const div = document.createElement('div');
                    div.className = 'card';
                    div.onclick = () => window.location.href = `watch.html?id=${movie.id}`;
                    div.innerHTML = `
                        <img src="${movie.poster}" alt="${movie.title}" loading="lazy">
                        <div class="card-overlay">
                            <div class="card-title">${movie.title}</div>
                            <div class="card-meta">${movie.year} • ${movie.rating} ★</div>
                        </div>
                    `;
                    grid.appendChild(div);
                });
            });
    </script>
</body>
</html>
